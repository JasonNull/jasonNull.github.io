---
title: gc日志
date: 2018-06-22 19:27:35
tags: 
- jvm 
- gc 
- cms 
- g1
categories: 
- java
- jvm
toc: true
---
## cms参数
-XX:+CMSClassUnloadingEnabled -XX:CMSInitiatingOccupancyFraction=80 -XX:CMSMaxAbortablePrecleanTime=5000 -XX:+ExplicitGCInvokesConcurrent -XX:InitialHeapSize=8589934592 -XX:MaxDirectMemorySize=4294967296 -XX:MaxHeapSize=8589934592 -XX:MaxNewSize=6442450944 -XX:NewSize=6442450944 -XX:OldPLABSize=16 -XX:ParallelGCThreads=4 -XX:+PrintGC -XX:+PrintGCDateStamps -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:SurvivorRatio=4 -XX:+UseCMSCompactAtFullCollection -XX:+UseCMSInitiatingOccupancyOnly -XX:+UseCompressedClassPointers -XX:+UseCompressedOops -XX:+UseConcMarkSweepGC -XX:+UseParNewGC
<!-- more -->

## cms日志
```json
// 正常cms log
2018-04-23T02:22:54.609+0800: 225411.844: [GC (CMS Initial Mark) [1 CMS-initial-mark: 1815727K(2097152K)] 2426460K(7340032K), 0.1136457 secs] [Times: user=0.38 sys=0.01, real=0.11 secs]
2018-04-23T02:22:54.723+0800: 225411.958: [CMS-concurrent-mark-start]
2018-04-23T02:22:55.236+0800: 225412.470: [CMS-concurrent-mark: 0.495/0.512 secs] [Times: user=1.70 sys=0.06, real=0.52 secs]
2018-04-23T02:22:55.236+0800: 225412.470: [CMS-concurrent-preclean-start]
2018-04-23T02:22:55.246+0800: 225412.480: [CMS-concurrent-preclean: 0.008/0.009 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
2018-04-23T02:22:55.246+0800: 225412.480: [CMS-concurrent-abortable-preclean-start]
2018-04-23T02:22:55.246+0800: 225412.480: [CMS-concurrent-abortable-preclean: 0.000/0.000 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
2018-04-23T02:22:55.248+0800: 225412.483: [GC (CMS Final Remark) [YG occupancy: 923389 K (5242880 K)]2018-04-23T02:22:55.248+0800: 225412.483: [Rescan (parallel) , 0.1816314 secs]2018-04-23T02:22:55.430+0800: 225412.664: [weak refs processing, 0.0096429 secs]2018-04-23T02:22:55.440+0800: 225412.674: [class unloading, 0.1149430 secs]2018-04-23T02:22:55.555+0800: 225412.789: [scrub symbol table, 0.0100393 secs]2018-04-23T02:22:55.565+0800: 225412.799: [scrub string table, 0.0025445 secs][1 CMS-remark: 1815727K(2097152K)] 2739116K(7340032K), 0.3459856 secs] [Times: user=0.87 sys=0.01, real=0.34 secs]
2018-04-23T02:22:55.611+0800: 225412.845: [CMS-concurrent-sweep-start]
2018-04-23T02:22:56.039+0800: 225413.274: [CMS-concurrent-sweep: 0.374/0.429 secs] [Times: user=1.50 sys=0.04, real=0.43 secs]
2018-04-23T02:22:56.040+0800: 225413.274: [CMS-concurrent-reset-start]
2018-04-23T02:22:56.045+0800: 225413.279: [CMS-concurrent-reset: 0.005/0.005 secs] [Times: user=0.02 sys=0.00, real=0.00 secs]
```
# g1日志
```json
2018-05-19T14:54:29.930+0800: 181748.799: [GC pause (G1 Evacuation Pause) (young), 0.2280865 secs]
   [Parallel Time: 206.5 ms, GC Workers: 4]
      [GC Worker Start (ms): Min: 181748799.6, Avg: 181748799.8, Max: 181748800.2, Diff: 0.6]
      [Ext Root Scanning (ms): Min: 4.7, Avg: 6.4, Max: 10.4, Diff: 5.7, Sum: 25.7]
      [Update RS (ms): Min: 92.5, Avg: 95.9, Max: 97.4, Diff: 4.8, Sum: 383.6]
         [Processed Buffers: Min: 483, Avg: 922.8, Max: 1157, Diff: 674, Sum: 3691]
      [Scan RS (ms): Min: 0.8, Avg: 0.8, Max: 0.8, Diff: 0.1, Sum: 3.2]
      [Code Root Scanning (ms): Min: 0.4, Avg: 0.4, Max: 0.4, Diff: 0.0, Sum: 1.6]
      [Object Copy (ms): Min: 99.5, Avg: 100.2, Max: 101.3, Diff: 1.8, Sum: 401.0]
      [Termination (ms): Min: 0.0, Avg: 1.6, Max: 2.7, Diff: 2.7, Sum: 6.4]
         [Termination Attempts: Min: 1, Avg: 1.0, Max: 1, Diff: 0, Sum: 4]
      [GC Worker Other (ms): Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.1]
      [GC Worker Total (ms): Min: 204.5, Avg: 205.4, Max: 206.3, Diff: 1.9, Sum: 821.8]
      [GC Worker End (ms): Min: 181749004.7, Avg: 181749005.3, Max: 181749006.0, Diff: 1.3]
   [Code Root Fixup: 0.5 ms]
   [Code Root Purge: 0.0 ms]
   [Clear CT: 0.8 ms]
   [Other: 20.3 ms]
      [Choose CSet: 0.0 ms]
      [Ref Proc: 16.6 ms]
      [Ref Enq: 0.2 ms]
      [Redirty Cards: 0.2 ms]
      [Humongous Register: 0.2 ms]
      [Humongous Reclaim: 0.6 ms]
      [Free CSet: 1.7 ms]
   [Eden: 4836.0M(4836.0M)->0.0B(4768.0M) Survivors: 76.0M->144.0M Heap: 5973.0M(8192.0M)->768.7M(8192.0M)]
 [Times: user=0.69 sys=0.01, real=0.23 secs]
2018-05-19T14:54:57.248+0800: 181776.117: [GC pause (G1 Evacuation Pause) (young), 0.1199877 secs]
   [Parallel Time: 104.5 ms, GC Workers: 4]
      [GC Worker Start (ms): Min: 181776117.1, Avg: 181776117.1, Max: 181776117.2, Diff: 0.1]
      [Ext Root Scanning (ms): Min: 2.9, Avg: 3.1, Max: 3.2, Diff: 0.3, Sum: 12.3]
      [Update RS (ms): Min: 42.2, Avg: 42.3, Max: 42.3, Diff: 0.1, Sum: 169.1]
         [Processed Buffers: Min: 482, Avg: 493.2, Max: 506, Diff: 24, Sum: 1973]
      [Scan RS (ms): Min: 0.7, Avg: 0.8, Max: 0.9, Diff: 0.2, Sum: 3.3]
      [Code Root Scanning (ms): Min: 0.4, Avg: 0.4, Max: 0.4, Diff: 0.1, Sum: 1.6]
      [Object Copy (ms): Min: 57.5, Avg: 57.7, Max: 57.8, Diff: 0.3, Sum: 230.6]
      [Termination (ms): Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.0]
         [Termination Attempts: Min: 1, Avg: 1.0, Max: 1, Diff: 0, Sum: 4]
      [GC Worker Other (ms): Min: 0.1, Avg: 0.1, Max: 0.1, Diff: 0.1, Sum: 0.4]
      [GC Worker Total (ms): Min: 104.3, Avg: 104.4, Max: 104.4, Diff: 0.1, Sum: 417.4]
      [GC Worker End (ms): Min: 181776221.5, Avg: 181776221.5, Max: 181776221.5, Diff: 0.1]
   [Code Root Fixup: 0.5 ms]
   [Code Root Purge: 0.0 ms]
   [Clear CT: 0.6 ms]
   [Other: 14.3 ms]
      [Choose CSet: 0.0 ms]
      [Ref Proc: 11.1 ms]
      [Ref Enq: 0.1 ms]
      [Redirty Cards: 0.1 ms]
      [Humongous Register: 0.2 ms]
      [Humongous Reclaim: 0.3 ms]
      [Free CSet: 1.7 ms]
   [Eden: 4768.0M(4768.0M)->0.0B(4820.0M) Survivors: 144.0M->92.0M Heap: 5758.2M(8192.0M)->718.8M(8192.0M)]
 [Times: user=0.42 sys=0.00, real=0.12 secs]
2018-05-19T14:55:13.434+0800: 181792.302: [GC pause (G1 Evacuation Pause) (young), 0.0821037 secs]
   [Parallel Time: 69.0 ms, GC Workers: 4]
      [GC Worker Start (ms): Min: 181792302.8, Avg: 181792302.8, Max: 181792302.9, Diff: 0.1]
      [Ext Root Scanning (ms): Min: 5.7, Avg: 6.1, Max: 6.5, Diff: 0.7, Sum: 24.6]
      [Update RS (ms): Min: 26.6, Avg: 26.7, Max: 26.7, Diff: 0.1, Sum: 106.7]
         [Processed Buffers: Min: 310, Avg: 326.2, Max: 343, Diff: 33, Sum: 1305]
      [Scan RS (ms): Min: 0.8, Avg: 0.8, Max: 0.8, Diff: 0.1, Sum: 3.1]
      [Code Root Scanning (ms): Min: 0.4, Avg: 0.4, Max: 0.4, Diff: 0.1, Sum: 1.7]
      [Object Copy (ms): Min: 34.4, Avg: 34.7, Max: 35.0, Diff: 0.6, Sum: 138.7]
      [Termination (ms): Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.0]
         [Termination Attempts: Min: 1, Avg: 1.0, Max: 1, Diff: 0, Sum: 4]
      [GC Worker Other (ms): Min: 0.1, Avg: 0.1, Max: 0.1, Diff: 0.1, Sum: 0.4]
      [GC Worker Total (ms): Min: 68.8, Avg: 68.8, Max: 68.8, Diff: 0.0, Sum: 275.1]
      [GC Worker End (ms): Min: 181792371.6, Avg: 181792371.6, Max: 181792371.6, Diff: 0.1]
   [Code Root Fixup: 0.5 ms]
   [Code Root Purge: 0.0 ms]
   [Clear CT: 0.6 ms]
   [Other: 12.0 ms]
      [Choose CSet: 0.0 ms]
      [Ref Proc: 9.0 ms]
      [Ref Enq: 0.0 ms]
      [Redirty Cards: 0.2 ms]
      [Humongous Register: 0.2 ms]
      [Humongous Reclaim: 0.2 ms]
      [Free CSet: 1.6 ms]
   [Eden: 4820.0M(4820.0M)->0.0B(4852.0M) Survivors: 92.0M->60.0M Heap: 5678.8M(8192.0M)->686.9M(8192.0M)]
 [Times: user=0.28 sys=0.01, real=0.08 secs]
2018-05-19T14:55:42.260+0800: 181821.129: [GC pause (G1 Evacuation Pause) (young), 0.1619036 secs]
   [Parallel Time: 141.3 ms, GC Workers: 4]
      [GC Worker Start (ms): Min: 181821129.4, Avg: 181821129.5, Max: 181821129.5, Diff: 0.1]
      [Ext Root Scanning (ms): Min: 2.9, Avg: 3.1, Max: 3.3, Diff: 0.4, Sum: 12.6]
      [Update RS (ms): Min: 41.9, Avg: 41.9, Max: 42.0, Diff: 0.1, Sum: 167.8]
         [Processed Buffers: Min: 469, Avg: 506.0, Max: 533, Diff: 64, Sum: 2024]
      [Scan RS (ms): Min: 0.7, Avg: 0.8, Max: 0.8, Diff: 0.1, Sum: 3.2]
      [Code Root Scanning (ms): Min: 0.4, Avg: 0.4, Max: 0.4, Diff: 0.0, Sum: 1.6]
      [Object Copy (ms): Min: 94.5, Avg: 94.7, Max: 94.8, Diff: 0.3, Sum: 378.6]
      [Termination (ms): Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.0]
         [Termination Attempts: Min: 1, Avg: 1.0, Max: 1, Diff: 0, Sum: 4]
      [GC Worker Other (ms): Min: 0.0, Avg: 0.1, Max: 0.1, Diff: 0.1, Sum: 0.3]
      [GC Worker Total (ms): Min: 141.0, Avg: 141.0, Max: 141.1, Diff: 0.1, Sum: 564.1]
      [GC Worker End (ms): Min: 181821270.4, Avg: 181821270.5, Max: 181821270.5, Diff: 0.1]
   [Code Root Fixup: 0.5 ms]
   [Code Root Purge: 0.0 ms]
   [Clear CT: 0.7 ms]
   [Other: 19.4 ms]
      [Choose CSet: 0.0 ms]
      [Ref Proc: 16.2 ms]
      [Ref Enq: 0.2 ms]
      [Redirty Cards: 0.1 ms]
      [Humongous Register: 0.2 ms]
      [Humongous Reclaim: 0.3 ms]
      [Free CSet: 1.6 ms]
   [Eden: 4852.0M(4852.0M)->0.0B(4756.0M) Survivors: 60.0M->156.0M Heap: 5766.5M(8192.0M)->786.9M(8192.0M)]
 [Times: user=0.57 sys=0.01, real=0.16 secs]
 ```